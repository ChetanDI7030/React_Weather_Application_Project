"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[6693],{55877:(t,e,i)=>{var s;i.d(e,{u:()=>s}),function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"}(s||(s={}))},53521:(t,e,i)=>{i.d(e,{q:()=>r});var s=i(79369);class r{constructor(t,e){this._storage=new s.F,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),e&&this._storage.registerRemoveFunc("",e)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,t,e,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}}},79369:(t,e,i)=>{i.d(e,{F:()=>o,Mn:()=>n});var s=i(30015);var r,a;(a=r||(r={}))[a.ALL=0]="ALL",a[a.SOME=1]="SOME";class n{constructor(t,e,i){this.name=t,this._storage=e,this.id=l+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(t){return this._storage.getSize(this,t)}resetHitRate(){this._hit=this._miss=0}put(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this,t,e,i,s)}pop(t){const e=this._storage.pop(this,t);return void 0===e?++this._miss:++this._hit,e}get(t){const e=this._storage.get(this,t);return void 0===e?++this._miss:++this._hit,e}peek(t){return this._storage.peek(this,t)}updateSize(t,e,i){this._storage.updateSize(this,t,e,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class o{get size(){return this._size}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new s.A,this._users=new s.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,e){var i;const s=this._db.get(t.id+e);return null!==(i=null===s||void 0===s?void 0:s.size)&&void 0!==i?i:0}put(t,e,i,s,a){e=t.id+e;const n=this._db.get(e);if(n&&(this._size-=n.size,t.size-=n.size,this._db.delete(e),n.entry!==i&&this._notifyRemove(e,n.entry,n.size,r.ALL)),s>this._maxSize)return void this._notifyRemove(e,i,s,r.ALL);if(void 0===i)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn("Refusing to cache entry with size ".concat(s," for key ").concat(e)),void this._notifyRemove(e,i,0,r.ALL);const o=1+Math.max(a,-4)- -3;this._db.set(e,new h(i,s,o)),this._size+=s,t.size+=s,this._checkSize()}updateSize(t,e,i,s){e=t.id+e;const a=this._db.get(e);if(a&&a.entry===i){for(this._size-=a.size,t.size-=a.size;s>this._maxSize;){const t=this._notifyRemove(e,i,s,r.SOME);if(!(null!=t&&t>0))return void this._db.delete(e);s=t}a.size=s,this._size+=s,t.size+=s,this._checkSize()}}pop(t,e){e=t.id+e;const i=this._db.get(e);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(e),++this._hit,i.entry;++this._miss}get(t,e){e=t.id+e;const i=this._db.get(e);if(void 0!==i)return this._db.delete(e),i.lives=i.lifetime,this._db.set(e,i),++this._hit,i.entry;++this._miss}peek(t,e){const i=this._db.get(t.id+e);return i?++this._hit:++this._miss,null===i||void 0===i?void 0:i.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},i=new Array;this._db.forEach(((t,s)=>{const r=t.lifetime;i[r]=(i[r]||0)+t.size,this._users.forAll((i=>{const{id:r,name:a}=i;if(s.startsWith(r)){const i=e[a]||0;e[a]=i+t.size}}))}));const s={};this._users.forAll((t=>{const i=t.name;if("hitRate"in t&&"number"==typeof t.hitRate&&!isNaN(t.hitRate)&&t.hitRate>0){const r=e[i]||0;e[i]=r,s[i]=Math.round(100*t.hitRate)+"%"}else s[i]="0%"}));const r=Object.keys(e);r.sort(((t,i)=>e[i]-e[t])),r.forEach((i=>t[i]=Math.round(e[i]/2**20)+"MB / "+s[i]));for(let a=i.length-1;a>=0;--a){const e=i[a];e&&(t["Priority "+(a+-3-1)]=Math.round(e/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){const e=t.id;this._db.forEach(((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemove(i,t.entry,t.size,r.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,t.size,r.ALL))),this._users.forAll((t=>t.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,i,s){let r;return this._removeFuncs.some((a=>{if(t.startsWith(a[0])){const t=a[1](e,s,i);return"number"==typeof t&&(r=t),!0}return!1})),r}_checkSize(){this._users.forAll((t=>this._checkSizeLimits(t))),this._checkSizeLimits()}_checkSizeLimits(t){const e=null!==t&&void 0!==t?t:this;if(e.maxSize<0||e.size<=e.maxSize)return;const i=null===t||void 0===t?void 0:t.id;let s=!0;for(;s;){s=!1;for(const[r,a]of this._db)if(0===a.lifetime&&(!i||r.startsWith(i))){if(this._purgeItem(r,a,t),e.size<=.9*e.maxSize)return;s||(s=this._db.has(r))}}for(const[r,a]of this._db)if((!i||r.startsWith(i))&&(this._purgeItem(r,a,t),e.size<=.9*e.maxSize))return}_purgeItem(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((e=>t.startsWith(e.id)));if(this._db.delete(t),e.lives<=1){this._size-=e.size,i&&(i.size-=e.size);const s=this._notifyRemove(t,e.entry,e.size,r.SOME);null!=s&&s>0&&(this._size+=s,i&&(i.size+=s),e.lives=e.lifetime,e.size=s,this._db.set(t,e))}else--e.lives,this._db.set(t,e)}}let l=0;class h{constructor(t,e,i){this.entry=t,this.size=e,this.lifetime=i,this.lives=i}}},19502:(t,e,i)=>{i.d(e,{b:()=>l});var s=i(35143),r=i(76460),a=i(46053),n=(i(81806),i(47249),i(85842)),o=i(13096);const l=t=>{let e=class extends t{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const t=(0,o.qg)(this.url);if(null!=t&&t.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t)}set url(t){this._set("url",(0,o.Jf)(t,r.A.getLogger(this)))}};return(0,s._)([(0,a.MZ)()],e.prototype,"title",null),(0,s._)([(0,a.MZ)({type:String})],e.prototype,"url",null),e=(0,s._)([(0,n.$)("esri.layers.mixins.ArcGISService")],e),e}},82356:(t,e,i)=>{i.d(e,{d:()=>A});var s,r=i(35143),a=i(3825),n=i(91967),o=i(55877),l=i(50076),h=i(54901),c=i(53521),u=i(30015),_=i(50346),d=i(68134),f=i(52394),m=i(90534),v=i(46053),p=(i(81806),i(76460),i(47249),i(85842)),g=i(11164),z=i(18690),y=i(53084),b=i(78393);class w{constructor(t){this._validateJSON(t);const{location:e,data:i}=t;this.location=Object.freeze((0,y.o8)(e));const s=this.location.width,r=this.location.height;let a=!0,n=!0;const o=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t<=b.y9?e?new Array(t).fill(0):new Array(t):new Uint32Array(t)}(Math.ceil(s*r/32));let l=0;for(let h=0;h<i.length;h++){const t=h%32;i[h]?(n=!1,o[l]|=1<<t):a=!1,31===t&&++l}n?(this._availability="unavailable",this.byteSize=40):a?(this._availability="available",this.byteSize=40):(this._availability=o,this.byteSize=40+(0,b.Ek)(o))}getAvailability(t,e){if("unavailable"===this._availability||"available"===this._availability)return this._availability;const i=(t-this.location.top)*this.location.width+(e-this.location.left),s=i%32,r=i>>5,a=this._availability;return r<0||r>a.length?"unknown":a[r]&1<<s?"available":"unavailable"}static fromDefinition(t,e){const i=t.service.request||a.A,{row:s,col:r,width:n,height:o}=t,h={query:{f:"json"}};return e=e?{...h,...e}:h,i(function(t){var e;let i;if(null!==(e=t.service.tileServers)&&void 0!==e&&e.length){const e=t.service.tileServers;i="".concat(e&&e.length?e[t.row%e.length]:t.service.url,"/tilemap/").concat(t.level,"/").concat(t.row,"/").concat(t.col,"/").concat(t.width,"/").concat(t.height)}else i="".concat(t.service.url,"/tilemap/").concat(t.level,"/").concat(t.row,"/").concat(t.col,"/").concat(t.width,"/").concat(t.height);const s=t.service.query;return s&&(i="".concat(i,"?").concat(s)),i}(t),e).then((t=>t.data)).catch((t=>{if(t&&t.details&&422===t.details.httpStatus)return{location:{top:s,left:r,width:n,height:o},valid:!0,data:(0,z.dY)(n*o,0)};throw t})).then((t=>{if(t.location&&(t.location.top!==s||t.location.left!==r||t.location.width!==n||t.location.height!==o))throw new l.A("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:s,left:r,width:n,height:o}});return w.fromJSON(t)}))}static fromJSON(t){return Object.freeze(new w(t))}_validateJSON(t){if(null===t||void 0===t||!t.location)throw new l.A("tilemap:missing-location","Location missing from tilemap response");if(!1===t.valid)throw new l.A("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new l.A("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new l.A("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new l.A("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function S(t){return"".concat(t.level,"/").concat(t.row,"/").concat(t.col,"/").concat(t.width,"/").concat(t.height)}let A=s=class extends n.A{constructor(t){super(t),this._pendingTilemapRequests={},this.request=a.A,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new c.q(2*o.u.MEGABYTES),this.addHandles((0,d.wB)((()=>{const{layer:t}=this;return[null===t||void 0===t?void 0:t.parsedUrl,null===t||void 0===t?void 0:t.tileServers,null===t||void 0===t?void 0:t.apiKey,null===t||void 0===t?void 0:t.customParameters]}),(()=>this._initializeTilemapDefinition()),d.Vh))}get effectiveMinLOD(){var t;return null!==(t=this.minLOD)&&void 0!==t?t:this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){var t;return null!==(t=this.maxLOD)&&void 0!==t?t:this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(t,e,i,s){var r;if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return Promise.reject(new l.A("tilemap-cache:level-unavailable","Level ".concat(t," is unavailable in the service")));const a=this._tmpTilemapDefinition,n=this._tilemapFromCache(t,e,i,a);if(n)return Promise.resolve(n);const o=null===(r=s)||void 0===r?void 0:r.signal;return s={...s,signal:null},new Promise(((t,e)=>{(0,_.u7)(o,(()=>e((0,_.NK)())));const i=S(a);let r=this._pendingTilemapRequests[i];if(!r){r=w.fromDefinition(a,s).then((t=>(this._tilemapCache.put(i,t,t.byteSize),t)));const t=()=>{delete this._pendingTilemapRequests[i]};this._pendingTilemapRequests[i]=r,r.then(t,t)}r.then(t,e)}))}getAvailability(t,e,i){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return"unavailable";const s=this._tilemapFromCache(t,e,i,this._tmpTilemapDefinition);return s?s.getAvailability(e,i):"unknown"}fetchAvailability(t,e,i,s){return!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD?Promise.reject(new l.A("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i})):this.fetchTilemap(t,e,i,s).catch((t=>t)).then((s=>{if(s instanceof w){const r=s.getAvailability(e,i);if("unavailable"===r)throw new l.A("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i});return r}if((0,_.zf)(s))throw s;return"unknown"}))}fetchAvailabilityUpsample(t,e,i,s,r){s.level=t,s.row=e,s.col=i;const a=this.layer.tileInfo;a.updateTileInfo(s);const n=this.fetchAvailability(t,e,i,r).catch((t=>{if((0,_.zf)(t))throw t;if(a.upsampleTile(s))return this.fetchAvailabilityUpsample(s.level,s.row,s.col,s,r);throw t}));return this._fetchAvailabilityUpsamplePrefetch(s.id,t,e,i,r,n),n}async _fetchAvailabilityUpsamplePrefetch(t,e,i,r,a,n){if(!this._prefetchingEnabled||null==t)return;const o="prefetch-".concat(t);if(this.hasHandles(o))return;const l=new AbortController;n.then((()=>l.abort()),(()=>l.abort()));let c=!1;const u=(0,h.hA)((()=>{c||(c=!0,l.abort())}));if(this.addHandles(u,o),await(0,f.md)(10,l.signal).catch((()=>{})),c||(c=!0,this.removeHandles(o)),(0,_.G4)(l))return;const d=new g.U(t,e,i,r),m={...a,signal:l.signal},v=this.layer.tileInfo;for(let h=0;s._prefetches.length<s._maxPrefetch&&v.upsampleTile(d);++h){const t=this.fetchAvailability(d.level,d.row,d.col,m);s._prefetches.push(t);const e=()=>{s._prefetches.removeUnordered(t)};t.then(e,e)}}_initializeTilemapDefinition(){var t;if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:i,customParameters:s}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:(0,m.x0)({...e.query,...s,token:null!==i&&void 0!==i?i:null===(t=e.query)||void 0===t?void 0:t.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(t,e,i,s){s.level=t,s.row=e-e%this.size,s.col=i-i%this.size;const r=S(s);return this._tilemapCache.get(r)}get test(){const t=this;return{get prefetchingEnabled(){return t._prefetchingEnabled},set prefetchingEnabled(e){t._prefetchingEnabled=e},hasTilemap:(e,i,s)=>!!t._tilemapFromCache(e,i,s,t._tmpTilemapDefinition)}}};A._maxPrefetch=4,A._prefetches=new u.A({initialSize:s._maxPrefetch}),(0,r._)([(0,v.MZ)({constructOnly:!0})],A.prototype,"layer",void 0),(0,r._)([(0,v.MZ)({constructOnly:!0})],A.prototype,"minLOD",void 0),(0,r._)([(0,v.MZ)({constructOnly:!0})],A.prototype,"maxLOD",void 0),(0,r._)([(0,v.MZ)({constructOnly:!0})],A.prototype,"request",void 0),(0,r._)([(0,v.MZ)({constructOnly:!0})],A.prototype,"size",void 0),A=s=(0,r._)([(0,p.$)("esri.layers.support.TilemapCache")],A)}}]);
//# sourceMappingURL=6693.411e69ff.chunk.js.map