"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[9035,2945],{53666:(e,t,r)=>{r.d(t,{A:()=>p});var i=r(35143),o=r(69098),n=r(42553),s=r(18288),a=r(46053),l=(r(81806),r(76460),r(47249),r(6409)),d=r(85842),u=r(90115);let c=class extends((0,o.O)(n.oY)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,s.t)(this.value,this.unit,"milliseconds")}};(0,i._)([(0,l.e)(u.j,{nonNullable:!0})],c.prototype,"unit",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),c=(0,i._)([(0,d.$)("esri.TimeInterval")],c);const p=c},37546:(e,t,r)=>{r.d(t,{P:()=>y});var i=r(50076),o=r(53514),n=r(24387),s=r(90534),a=r(49723),l=r(19258),d=r(49140),u=r(46053),c=r(95474),p=r(79453);function y(e){var t;const r=null!==(t=null===e||void 0===e?void 0:e.origins)&&void 0!==t?t:[void 0];return(t,i)=>{const o=function(e,t,r){var i;if("resource"===(null===e||void 0===e?void 0:e.type))return function(e,t,r){const i=(0,l.z4)(t,r);return{type:String,read:(e,t,r)=>{const o=(0,p.r)(e,t,r);return i.type===String?o:"function"==typeof i.type?new i.type({url:o}):void 0},write:{writer(t,o,a,l){if(null===l||void 0===l||!l.resources)return"string"==typeof t?void(o[a]=(0,p.t)(t,l)):void(o[a]=t.write({},l));const u=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),y=(0,p.t)(u,{...l,verifyItemRelativeUrls:null!==l&&void 0!==l&&l.verifyItemRelativeUrls?{writtenUrls:l.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},p.M.NO),f=i.type!==String&&(!(0,n.H)(this)||(null===l||void 0===l?void 0:l.origin)&&this.originIdOf(r)>(0,d.aB)(l.origin)),g={object:this,propertyName:r,value:t,targetUrl:y,dest:o,targetPropertyName:a,context:l,params:e};null!==l&&void 0!==l&&l.portalItem&&y&&!(0,s.oP)(y)?f&&null!==e&&void 0!==e&&e.contentAddressed?h(g):f?function(e){var t;const{context:r,targetUrl:i,params:o,value:n,dest:a,targetPropertyName:l}=e;if(!r.portalItem)return;const d=r.portalItem.resourceFromPath(i),u=m(n,i,r),p=(0,c.n)(u),y=(0,s.Zo)(d.path),f=null!==(t=null===o||void 0===o?void 0:o.compress)&&void 0!==t&&t;p===y?(r.resources&&v({...e,resource:d,content:u,compress:f,updates:r.resources.toUpdate}),a[l]=i):h(e)}(g):function(e){let{context:t,targetUrl:r,dest:i,targetPropertyName:o}=e;t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),i[o]=r)}(g):null!==l&&void 0!==l&&l.portalItem&&(null==y||null!=(0,p.i)(y)||(0,s.w8)(y)||f)?h(g):o[a]=y}}}}(e,t,r);switch(null!==(i=null===e||void 0===e?void 0:e.type)&&void 0!==i?i:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=p.b;return{read:e,write:t}}}}(e,t,i);for(const e of r){const r=(0,u.rM)(t,e,i);for(const e in o)r[e]=o[e]}}}function h(e){var t,r,n,l;const{targetUrl:d,params:u,value:y,context:h,dest:f,targetPropertyName:g}=e;if(!h.portalItem)return;const w=(0,p.p)(d),b=m(y,d,h);if(null!==u&&void 0!==u&&u.contentAddressed&&"json"!==b.type)return void(null===(t=h.messages)||void 0===t||t.push(new i.A("persistable:contentAddressingUnsupported",'Property "'.concat(g,'" is trying to serializing a resource with content of type ').concat(b.type," with content addressing. Content addressing is only supported for json resources."),{content:b})));const I=null!==u&&void 0!==u&&u.contentAddressed&&"json"===b.type?(0,o.d)(b.jsonString):null!==(r=null===w||void 0===w?void 0:w.filename)&&void 0!==r?r:(0,a.lk)(),S=(0,s.fj)(null!==(n=null===u||void 0===u?void 0:u.prefix)&&void 0!==n?n:null===w||void 0===w?void 0:w.prefix,I),_="".concat(S,".").concat((0,c.n)(b));if(null!==u&&void 0!==u&&u.contentAddressed&&h.resources&&"json"===b.type){var A;const e=null!==(A=h.resources.toKeep.find((e=>{let{resource:t}=e;return t.path===_})))&&void 0!==A?A:h.resources.toAdd.find((e=>{let{resource:t}=e;return t.path===_}));if(e)return void(f[g]=e.resource.itemRelativeUrl)}const L=h.portalItem.resourceFromPath(_);(0,s.w8)(d)&&h.resources&&h.resources.pendingOperations.push((0,s.tk)(d).then((e=>{L.path="".concat(S,".").concat((0,c.n)({type:"blob",blob:e})),f[g]=L.itemRelativeUrl})).catch((()=>{})));const x=null!==(l=null===u||void 0===u?void 0:u.compress)&&void 0!==l&&l;h.resources&&v({...e,resource:L,content:b,compress:x,updates:h.resources.toAdd}),f[g]=L.itemRelativeUrl}function v(e){let{object:t,propertyName:r,updates:i,resource:o,content:n,compress:s}=e;i.push({resource:o,content:n,compress:s,finish:e=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(t,r,e)}})}function m(e,t,r){return"string"==typeof e?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(r))}}},48723:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Le});var i=r(35143),o=r(39356),n=r(16868),s=(r(63844),r(14873),r(47662),r(72690),r(86946),r(71832),r(5766),r(35039),r(86616),r(31382)),a=r(3825),l=r(69098),d=r(94643),u=r(50076),c=r(76460),p=r(77717),y=r(50346),h=r(68134),v=r(90534),m=r(46053),f=(r(81806),r(47249),r(39314)),g=r(28379),w=r(85842),b=r(49140),I=r(58666),S=r(13904),_=r(25515),A=r(45652),L=r(12406),x=r(19502),F=r(31362),E=r(61979),M=r(11270),P=r(94729),j=r(5682),Z=r(90260),T=r(11155),O=r(13096),U=r(39323),R=r(16981),N=r(55053),D=r(46326),C=r(80524),k=r(89672),q=r(76350),H=r(1900),V=r(53430),G=r(2395),B=r(19463),Q=r(71401),K=r(27937),W=r(5618),z=r(62487),J=r(42553);let $=class extends J.oY{constructor(){super(...arguments),this.name=null,this.field=null,this.currentRangeExtent=null,this.fullRangeExtent=null,this.type="rangeInfo"}};(0,i._)([(0,m.MZ)({type:String,json:{read:!0,write:!0}})],$.prototype,"name",void 0),(0,i._)([(0,m.MZ)({type:String,json:{read:!0,write:!0}})],$.prototype,"field",void 0),(0,i._)([(0,m.MZ)({type:[Number],json:{read:!0,write:!0}})],$.prototype,"currentRangeExtent",void 0),(0,i._)([(0,m.MZ)({type:[Number],json:{read:!0,write:!0}})],$.prototype,"fullRangeExtent",void 0),(0,i._)([(0,m.MZ)({type:["rangeInfo"],readOnly:!0,json:{read:!1,write:!0}})],$.prototype,"type",void 0),$=(0,i._)([(0,w.$)("esri.layers.support.RangeInfo")],$);var Y,X=r(53084),ee=r(37546),te=r(62754),re=r(65215),ie=r(26346);let oe=Y=class extends((0,J.Te)(d.A.ofType(re.A))){constructor(e){super(e)}clone(){return new Y(this.items.map((e=>e.clone())))}write(e,t){return this.toJSON(t)}toJSON(e){var t;const r=null===e||void 0===e||null===(t=e.layer)||void 0===t?void 0:t.spatialReference;return r?this.toArray().map((t=>{if(!r.equals(t.spatialReference)){if(!(0,ie.canProjectWithoutEngine)(t.spatialReference,r))return null!==e&&void 0!==e&&e.messages&&e.messages.push(new te.A("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),null;const i=new re.A;(0,ie.projectPolygon)(t,i,r),t=i}const i=t.toJSON(e);return delete i.spatialReference,i})).filter((e=>null!=e)):(null!==e&&void 0!==e&&e.messages&&e.messages.push(new te.A("scenefilter:unsupported","Writing Scene filters without context layer is not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),this.toArray().map((t=>t.toJSON(e))))}static fromJSON(e,t){const r=new Y;return e.forEach((e=>r.add(re.A.fromJSON(e,t)))),r}};oe=Y=(0,i._)([(0,w.$)("esri.layers.support.PolygonCollection")],oe);const ne=oe;var se,ae=r(79453);let le=se=class extends J.oY{constructor(e){super(e),this.spatialRelationship="disjoint",this.geometries=new ne,this._geometriesSource=null}initialize(){this.addHandles((0,h.on)((()=>this.geometries),"after-changes",(()=>this.geometries=this.geometries),h.OH))}readGeometries(e,t,r){Array.isArray(e)?this.geometries=ne.fromJSON(e,r):this._geometriesSource={url:(0,ae.f)(e,r),context:r}}async loadGeometries(e,t){if(null==this._geometriesSource)return;const{url:r,context:i}=this._geometriesSource,o=await(0,a.A)(r,{responseType:"json",signal:null===t||void 0===t?void 0:t.signal}),n=e.toJSON(),s=o.data.map((e=>({...e,spatialReference:n})));this.geometries=ne.fromJSON(s,i),this._geometriesSource=null}clone(){const e=new se({geometries:(0,X.o8)(this.geometries),spatialRelationship:this.spatialRelationship});return e._geometriesSource=this._geometriesSource,e}};(0,i._)([(0,m.MZ)({type:["disjoint","contains"],nonNullable:!0,json:{write:!0}})],le.prototype,"spatialRelationship",void 0),(0,i._)([(0,m.MZ)({type:ne,nonNullable:!0,json:{write:!0}}),(0,ee.P)({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],le.prototype,"geometries",void 0),(0,i._)([(0,g.w)(["web-scene","portal-item"],"geometries")],le.prototype,"readGeometries",null),le=se=(0,i._)([(0,w.$)("esri.layers.support.SceneFilter")],le);const de=le;var ue=r(81589),ce=r(97015),pe=r(12482),ye=r(31111),he=r(30973);async function ve(e){const t=[];for(const r of e)r.name.toLowerCase().endsWith(".zip")?t.push(me(r)):t.push(Promise.resolve(r));return(await Promise.all(t)).flat()}async function me(e){const{BlobReader:t,ZipReader:i,BlobWriter:o}=await r.e(5795).then(r.bind(r,85795)),n=[],s=new i(new t(e));return(await s.getEntries()).forEach((e=>{var t;if(e.directory||/^__MACOS/i.test(e.filename))return;const r=new o,i=null===(t=e.getData)||void 0===t?void 0:t.call(e,r).then((t=>new File([t],e.filename)));i&&n.push(i)})),Promise.all(n)}var fe=r(72737),ge=r(2257),we=r(2183);const be=new Set(["3DObject","Point"]),Ie=(0,q.p)();let Se=class extends((0,T.M)((0,E.w6)((0,Z.w6)((0,x.b)((0,M.q)((0,P.A)((0,j.j)((0,p.P)((0,F.d)((0,L.p)((0,l.O)(_.A)))))))))))){constructor(){super(...arguments),this.featureReduction=null,this.rangeInfos=null,this.operationalLayerType="ArcGISSceneServiceLayer",this.type="scene",this.fields=null,this.floorInfo=null,this.outFields=null,this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.excludeObjectIds=new d.A,this.definitionExpression=null,this.filter=null,this.path=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.priority=null,this.semantic=null,this.cachedDrawingInfo={color:!1},this.popupEnabled=!0,this.popupTemplate=null,this.objectIdField=null,this.globalIdField=null,this._fieldUsageInfo={},this.screenSizePerspectiveEnabled=!0,this.serviceItemId=void 0}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}destroy(){this._set("renderer",null)}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){var r,i,o;const n=null===(r=this.getFeatureType(null===t||void 0===t?void 0:t.feature))||void 0===r||null===(r=r.domains)||void 0===r?void 0:r[e];return n&&"inherited"!==n.type?n:null!==(i=null===(o=this.getField(e))||void 0===o?void 0:o.domain)&&void 0!==i?i:null}getFeatureType(e){return e&&this.associatedLayer?this.associatedLayer.getFeatureType(e):null}get types(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.types)&&void 0!==e?e:[]}get typeIdField(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.typeIdField)&&void 0!==e?e:null}get templates(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.templates)&&void 0!==e?e:null}get formTemplate(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.formTemplate)&&void 0!==e?e:null}get fieldsIndex(){return new H.A(this.fields)}readNodePages(e,t,r){return"Point"===t.layerType&&(e=t.pointNodePages),null==e||"object"!=typeof e?null:G.W4.fromJSON(e,r)}set elevationInfo(e){this._set("elevationInfo",e),this.loaded&&this._validateElevationInfo()}get effectiveCapabilities(){var e;return this._capabilitiesFromAssociatedFeatureLayer(null===(e=this.associatedLayer)||void 0===e?void 0:e.effectiveCapabilities)}get effectiveEditingEnabled(){return null!=this.associatedLayer&&(0,D.C$)(this.associatedLayer)}get geometryType(){return Ae[this.profile]||"mesh"}set renderer(e){(0,V.yp)(e,this.fieldsIndex),this._set("renderer",e)}readCachedDrawingInfo(e){return null!=e&&"object"==typeof e||(e={}),null==e.color&&(e.color=!1),e}get capabilities(){var e;return this._capabilitiesFromAssociatedFeatureLayer(null===(e=this.associatedLayer)||void 0===e?void 0:e.capabilities)}_capabilitiesFromAssociatedFeatureLayer(e){var t;e=null!=e?e:R.P;const{query:r,queryRelated:i,editing:{supportsGlobalId:o,supportsRollbackOnFailure:n,supportsUploadWithItemId:s,supportsGeometryUpdate:a,supportsReturnServiceEditsInSourceSpatialReference:l},data:{supportsZ:d,supportsM:u,isVersioned:c,supportsAttachment:p},operations:{supportsEditing:y,supportsAdd:h,supportsUpdate:v,supportsDelete:m,supportsQuery:f,supportsQueryAttachments:g,supportsAsyncConvert3D:w}}=e,b=e.operations.supportsChangeTracking,I=!(null===(t=this.associatedLayer)||void 0===t||!t.infoFor3D)&&(0,ye.Vo)();return{query:r,queryRelated:i,editing:{supportsGlobalId:o,supportsReturnServiceEditsInSourceSpatialReference:l,supportsRollbackOnFailure:n,supportsGeometryUpdate:I&&a,supportsUploadWithItemId:s},data:{supportsAttachment:p,supportsZ:d,supportsM:u,isVersioned:c},operations:{supportsQuery:f,supportsQueryAttachments:g,supportsEditing:y&&b,supportsAdd:I&&h&&b,supportsDelete:I&&m&&b,supportsUpdate:v&&b,supportsAsyncConvert3D:w}}}get editingEnabled(){var e,t;return this._isOverridden("editingEnabled")?this._get("editingEnabled"):null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.editingEnabled)&&void 0!==e&&e}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}get infoFor3D(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.infoFor3D)&&void 0!==e?e:null}get relationships(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.relationships}get defaultPopupTemplate(){return this.associatedLayer||this.attributeStorageInfo?this.createPopupTemplate():null}readObjectIdField(e,t){return!e&&t.fields&&t.fields.some((t=>("esriFieldTypeOID"===t.type&&(e=t.name),!!e))),e||void 0}readGlobalIdField(e,t){return!e&&t.fields&&t.fields.some((t=>("esriFieldTypeGlobalID"===t.type&&(e=t.name),!!e))),e||void 0}get displayField(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.displayField)&&void 0!==e?e:null}readProfile(e,t){const r=t.store.profile;return null!=r&&_e[r]?_e[r]:(c.A.getLogger(this).error("Unknown or missing profile",{profile:r,layer:this}),"mesh-pyramids")}load(e){return this.addResolvingPromise(this._load(e)),Promise.resolve(this)}async _load(e){const t=null!=e?e.signal:null;await this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(y.QP),await this._fetchService(t),await Promise.all([this._fetchIndexAndUpdateExtent(this.nodePages,t),this._setAssociatedFeatureLayer(t),this._loadFilterGeometries()]),this._validateElevationInfo(),this._applyAssociatedLayerOverrides(),this._populateFieldUsageInfo(),await(0,ue.L)(this,{origin:"service"},t),(0,V.yp)(this.renderer,this.fieldsIndex),await this.finishLoadEditablePortalLayer(e)}async beforeSave(){null!=this.filter&&(this.filter=this.filter.clone(),await this.load())}async _loadFilterGeometries(){if(this.filter)try{await this.filter.loadGeometries(this.spatialReference)}catch(e){c.A.getLogger(this).error("#_loadFilterGeometries()",this,"Failed to load filter geometries. Geometry filter will not be applied for this layer.",{error:e}),this.filter=null}}createQuery(){const e=new ce.A;return"mesh"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||"1=1",e.sqlFormat="standard",e.outFields=["*"],e}queryExtent(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryExtent(e||this.createQuery(),t)))}queryFeatureCount(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatureCount(e||this.createQuery(),t)))}queryFeatures(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatures(e||this.createQuery(),t))).then((e=>{if(null!==e&&void 0!==e&&e.features)for(const t of e.features)t.layer=this,t.sourceLayer=this;return e}))}async queryRelatedFeatures(e,t){if(await this.load(),!this.associatedLayer)throw new u.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});return this.associatedLayer.queryRelatedFeatures(e,t)}async queryRelatedFeaturesCount(e,t){if(await this.load(),!this.associatedLayer)throw new u.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});return this.associatedLayer.queryRelatedFeaturesCount(e,t)}async queryCachedAttributes(e,t){var r;const i=(0,V.hL)(this.fieldsIndex,await(0,ge.TO)(this,(0,ge.D8)(this)));return(0,fe.s1)(this.parsedUrl.path,null!==(r=this.attributeStorageInfo)&&void 0!==r?r:[],e,t,i,this.apiKey,this.customParameters)}async queryCachedFeature(e,t){const r=await this.queryCachedAttributes(e,[t]);if(!r||0===r.length)throw new u.A("scenelayer:feature-not-in-cached-data","Feature not found in cached data");const i=new o.A;return i.attributes=r[0],i.layer=this,i.sourceLayer=this,i}queryObjectIds(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryObjectIds(e||this.createQuery(),t)))}queryAttachments(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryAttachments(e,t)))}getFieldUsageInfo(e){const t={supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[e]||t:(c.A.getLogger(this).error("#getFieldUsageInfo()","Unavailable until layer is loaded"),t)}createPopupTemplate(e){return(0,he.tn)(this,e)}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return null!==e&&void 0!==e&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),!this.associatedLayer)throw new u.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new u.A("scenelayer:query-not-available","SceneLayer associated feature layer could not be loaded",{layer:this,error:e})}return this.associatedLayer}hasCachedStatistics(e){return null!=this.statisticsInfo&&this.statisticsInfo.some((t=>t.name===e))}async queryCachedStatistics(e,t){if(await this.load(t),!this.statisticsInfo)throw new u.A("scenelayer:no-cached-statistics","Cached statistics are not available for this layer");const r=this.fieldsIndex.get(e);if(!r)throw new u.A("scenelayer:field-unexisting","Field '".concat(e,"' does not exist on the layer"));for(const i of this.statisticsInfo)if(i.name===r.name){const e=(0,v.fj)(this.parsedUrl.path,i.href);return(0,a.A)(e,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t?t.signal:null}).then((e=>e.data))}throw new u.A("scenelayer:no-cached-statistics","Cached statistics for this attribute are not available")}async saveAs(e,t){return this._debouncedSaveOperations(Z.Xh.SAVE_AS,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"scene"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"scene"};return this._debouncedSaveOperations(Z.Xh.SAVE,e)}async applyEdits(e,t){var i,o;const{applyEdits:n}=await r.e(2229).then(r.bind(r,54610));let s=t;await this.load();const a=this.associatedLayer;if(!a)throw new u.A("".concat(this.type,"-layer:not-editable"),"Service is not editable");await a.load();const{globalIdField:l}=a,d=!!a.infoFor3D,c=null===(i=null===(o=s)||void 0===o?void 0:o.globalIdUsed)||void 0===i||i;if(d&&null==l)throw new u.A("".concat(this.type,"-layer:not-editable"),"Valid globalIdField expected on editable SceneLayer");if(d&&!c)throw new u.A("".concat(this.type,"-layer:globalid-required"),"globalIdUsed must not be false for SceneLayer editing as globalIds are required.");return(0,O.Wo)(a.url)&&d&&null!=e.deleteFeatures&&null!=l&&(s={...s,globalIdToObjectId:await(0,D.GA)(a,e.deleteFeatures,l)}),n(this,a.source,e,s)}async uploadAssets(e,t){if(await this.load(),null==this.associatedLayer)throw new u.A("".concat(this.type,"-layer:not-editable"),"Service is not editable");return await this.associatedLayer.load(),this.associatedLayer.uploadAssets(e,t)}on(e,t){return super.on(e,t)}async convertMesh(e,t){var r;const i=e=>{throw c.A.getLogger(this).error(".convertMesh()",e.message),e};await this.load(),this.infoFor3D||i(new u.A("invalid:layer","SceneLayer has no capability for mesh conversion"));const o=await this.extractAndFilterFiles(e),n=o.reduce(((e,t)=>(0,B.oF)(this.infoFor3D,t)?e+1:e),0);0===n&&i(new A.VP),n>1&&i(new A.XQ);const s=this.spatialReference,a=null!==(r=null===t||void 0===t?void 0:t.location)&&void 0!==r?r:new S.A({x:0,y:0,z:0,spatialReference:s}),l=a.spatialReference.isGeographic?"local":"georeferenced",d=I.A.createWithExternalSource(a,o,{vertexSpace:l}),[p]=await this.uploadAssets([d],t);return p}async extractAndFilterFiles(e){await this.load();const t=this.infoFor3D;return t?(await ve(e)).filter((e=>(0,B.fu)(t,e))):e}validateLayer(e){if(e.layerType&&!be.has(e.layerType))throw new u.A("scenelayer:layer-type-not-supported","SceneLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new u.A("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});if(this.version.major>2)throw new u.A("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});!function(e,t){let r=!1,i=!1;if(null==e)r=!0,i=!0;else{const o=t&&t.isGeographic;switch(e){case"east-north-up":case"earth-centered":r=!0,i=o;break;case"vertex-reference-frame":r=!0,i=!o;break;default:r=!1}}if(!r)throw new u.A("scenelayer:unsupported-normal-reference-frame","Normal reference frame is invalid.");if(!i)throw new u.A("scenelayer:incompatible-normal-reference-frame","Normal reference frame is incompatible with layer spatial reference.")}(this.normalReferenceFrame,this.spatialReference)}_getTypeKeywords(){const e=[];if("points"===this.profile)e.push("Point");else{if("mesh-pyramids"!==this.profile)throw new u.A("scenelayer:unknown-profile","SceneLayer:save() encountered an unknown SceneLayer profile: "+this.profile);e.push("3DObject")}return e}_populateFieldUsageInfo(){if(this._fieldUsageInfo={},this.fields)for(const t of this.fields){var e;const r=!(!this.attributeStorageInfo||!this.attributeStorageInfo.some((e=>e.name===t.name))),i=!(null===(e=this.associatedLayer)||void 0===e||null===(e=e.fields)||void 0===e||!e.some((e=>e&&t.name===e.name))),o={supportsLabelingInfo:r,supportsRenderer:r,supportsPopupTemplate:r||i,supportsLayerQuery:i};this._fieldUsageInfo[t.name]=o}}_applyAssociatedLayerOverrides(){this._applyAssociatedLayerFieldsOverrides(),this._applyAssociatedLayerPopupOverrides(),this._applyAssociatedLayerExtentOverride(),this._applyAssociatedLayerPrivileges()}_applyAssociatedLayerFieldsOverrides(){var e;if(null===(e=this.associatedLayer)||void 0===e||!e.fields)return;let t=null;for(const r of this.associatedLayer.fields){const e=this.getField(r.name);e?(!e.domain&&r.domain&&(e.domain=r.domain.clone()),e.editable=r.editable,e.nullable=r.nullable,e.length=r.length):(t||(t=this.fields?this.fields.slice():[]),t.push(r.clone()))}t&&this._set("fields",t)}_applyAssociatedLayerPopupOverrides(){if(!this.associatedLayer)return;const e=["popupTemplate","popupEnabled"],t=(0,f.oY)(this);for(let r=0;r<e.length;r++){const i=e[r],o=this.originIdOf(i),n=this.associatedLayer.originIdOf(i);o<n&&(n===b.Gr.SERVICE||n===b.Gr.PORTAL_ITEM)&&t.setAtOrigin(i,this.associatedLayer[i],n)}}_applyAssociatedLayerExtentOverride(){var e,t,r,i,o,n;const s=null===(e=this.associatedLayer)||void 0===e||null===(e=e.editingInfo)||void 0===e?void 0:e.lastEditDate,a=null===(t=this.associatedLayer)||void 0===t?void 0:t.serverGens,l=null===(r=this.associatedLayer)||void 0===r?void 0:r.getAtOrigin("fullExtent","service");(0,ye.Vo)()&&null!=(null===(i=this.associatedLayer)||void 0===i?void 0:i.infoFor3D)&&l&&(0,O.Wo)(null===(o=this.associatedLayer)||void 0===o?void 0:o.url)&&s&&(null===(n=this.serviceUpdateTimeStamp)||void 0===n?void 0:n.lastUpdate)!==s.getTime()&&(this.serviceUpdateTimeStamp||(null===a||void 0===a?void 0:a.minServerGen)!==(null===a||void 0===a?void 0:a.serverGen))&&(0,f.oY)(this).setAtOrigin("fullExtent",l.clone(),b.Gr.SERVICE)}_applyAssociatedLayerPrivileges(){const e=this.associatedLayer;e&&(this._set("userHasEditingPrivileges",e.userHasEditingPrivileges),this._set("userHasFullEditingPrivileges",e.userHasFullEditingPrivileges),this._set("userHasUpdateItemPrivileges",e.userHasUpdateItemPrivileges))}async _setAssociatedFeatureLayer(e){if(["mesh-pyramids","points"].includes(this.profile))try{const{serverUrl:t,layerId:r,portalItem:i}=await(0,U.L)("".concat(this.url,"/layers/").concat(this.layerId),{sceneLayerItem:this.portalItem,customParameters:this.customParameters,apiKey:this.apiKey,signal:e}),o=await z.S.FeatureLayer();this.associatedLayer=new o({url:t,customParameters:this.customParameters,layerId:r,portalItem:i}),await this.associatedLayer.load()}catch(me){(0,y.zf)(me)||this._logWarningOnPopupEnabled()}}async _logWarningOnPopupEnabled(){await(0,h.C_)((()=>this.popupEnabled&&null!=this.popupTemplate));const e="this SceneLayer: ".concat(this.title);null==this.attributeStorageInfo?c.A.getLogger(this).warn("Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on ".concat(e)):c.A.getLogger(this).info("Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on ".concat(e))}_validateElevationInfo(){const e=this.elevationInfo;"mesh-pyramids"===this.profile&&(0,pe.XF)(c.A.getLogger(this),(0,pe.$7)("Mesh scene layers","relative-to-scene",e)),(0,pe.XF)(c.A.getLogger(this),(0,pe.tW)("Scene layers",e))}};(0,i._)([(0,m.MZ)({types:{key:"type",base:C.c,typeMap:{selection:k.A}},json:{origins:{"web-scene":{name:"layerDefinition.featureReduction",write:!0},"portal-item":{name:"layerDefinition.featureReduction",write:!0}}}})],Se.prototype,"featureReduction",void 0),(0,i._)([(0,m.MZ)({type:[$],json:{read:!1,origins:{"web-scene":{name:"layerDefinition.rangeInfos",write:!0},"portal-item":{name:"layerDefinition.rangeInfos",write:!0}}}})],Se.prototype,"rangeInfos",void 0),(0,i._)([(0,m.MZ)({json:{read:!1}})],Se.prototype,"associatedLayer",void 0),(0,i._)([(0,m.MZ)({type:["show","hide"]})],Se.prototype,"listMode",void 0),(0,i._)([(0,m.MZ)({type:["ArcGISSceneServiceLayer"]})],Se.prototype,"operationalLayerType",void 0),(0,i._)([(0,m.MZ)({json:{read:!1},readOnly:!0})],Se.prototype,"type",void 0),(0,i._)([(0,m.MZ)({...Ie.fields,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],Se.prototype,"fields",void 0),(0,i._)([(0,m.MZ)()],Se.prototype,"types",null),(0,i._)([(0,m.MZ)()],Se.prototype,"typeIdField",null),(0,i._)([(0,m.MZ)()],Se.prototype,"templates",null),(0,i._)([(0,m.MZ)()],Se.prototype,"formTemplate",null),(0,i._)([(0,m.MZ)({readOnly:!0,clonable:!1})],Se.prototype,"fieldsIndex",null),(0,i._)([(0,m.MZ)({type:W.A,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],Se.prototype,"floorInfo",void 0),(0,i._)([(0,m.MZ)(Ie.outFields)],Se.prototype,"outFields",void 0),(0,i._)([(0,m.MZ)({type:G.W4,readOnly:!0,json:{read:!1}})],Se.prototype,"nodePages",void 0),(0,i._)([(0,g.w)("service","nodePages",["nodePages","pointNodePages"])],Se.prototype,"readNodePages",null),(0,i._)([(0,m.MZ)({type:[G.uV],readOnly:!0})],Se.prototype,"materialDefinitions",void 0),(0,i._)([(0,m.MZ)({type:[G.Ot],readOnly:!0})],Se.prototype,"textureSetDefinitions",void 0),(0,i._)([(0,m.MZ)({type:[G.L0],readOnly:!0})],Se.prototype,"geometryDefinitions",void 0),(0,i._)([(0,m.MZ)({readOnly:!0})],Se.prototype,"serviceUpdateTimeStamp",void 0),(0,i._)([(0,m.MZ)({readOnly:!0})],Se.prototype,"attributeStorageInfo",void 0),(0,i._)([(0,m.MZ)({readOnly:!0})],Se.prototype,"statisticsInfo",void 0),(0,i._)([(0,m.MZ)({type:d.A.ofType(Number),nonNullable:!0,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.excludeObjectIds",write:{enabled:!0}}})],Se.prototype,"excludeObjectIds",void 0),(0,i._)([(0,m.MZ)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Se.prototype,"definitionExpression",void 0),(0,i._)([(0,m.MZ)({type:de,json:{name:"layerDefinition.polygonFilter",write:{enabled:!0,allowNull:!0},origins:{service:{read:!1,write:!1}}}})],Se.prototype,"filter",void 0),(0,i._)([(0,m.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Se.prototype,"path",void 0),(0,i._)([(0,m.MZ)(N.Yj)],Se.prototype,"elevationInfo",null),(0,i._)([(0,m.MZ)({readOnly:!0,json:{read:!1}})],Se.prototype,"effectiveCapabilities",null),(0,i._)([(0,m.MZ)({readOnly:!0})],Se.prototype,"effectiveEditingEnabled",null),(0,i._)([(0,m.MZ)({type:String})],Se.prototype,"geometryType",null),(0,i._)([(0,m.MZ)(N.kF)],Se.prototype,"labelsVisible",void 0),(0,i._)([(0,m.MZ)({type:[Q.A],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:{reader:K.w},write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:K.w},write:!0}})],Se.prototype,"labelingInfo",void 0),(0,i._)([(0,m.MZ)(N.fV)],Se.prototype,"legendEnabled",void 0),(0,i._)([(0,m.MZ)({type:Number,json:{origins:{"web-document":{default:1,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}},read:{source:["opacity","layerDefinition.drawingInfo.transparency"],reader(e,t){var r;if("number"==typeof e&&e>=0&&e<=1)return e;const i=null===(r=t.layerDefinition)||void 0===r||null===(r=r.drawingInfo)||void 0===r?void 0:r.transparency;return void 0!==i?(0,we.D)(i):void 0}}},"portal-item":{write:!0},service:{read:!1}}}})],Se.prototype,"opacity",void 0),(0,i._)([(0,m.MZ)({type:["Low","High"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],Se.prototype,"priority",void 0),(0,i._)([(0,m.MZ)({type:["Labels"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],Se.prototype,"semantic",void 0),(0,i._)([(0,m.MZ)({types:s.X,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],Se.prototype,"renderer",null),(0,i._)([(0,m.MZ)({json:{read:!1}})],Se.prototype,"cachedDrawingInfo",void 0),(0,i._)([(0,g.w)("service","cachedDrawingInfo")],Se.prototype,"readCachedDrawingInfo",null),(0,i._)([(0,m.MZ)({readOnly:!0,json:{read:!1}})],Se.prototype,"capabilities",null),(0,i._)([(0,m.MZ)({type:Boolean,json:{read:!1}})],Se.prototype,"editingEnabled",null),(0,i._)([(0,m.MZ)({readOnly:!0,json:{write:!1,read:!1}})],Se.prototype,"infoFor3D",null),(0,i._)([(0,m.MZ)({readOnly:!0,json:{write:!1,read:!1}})],Se.prototype,"relationships",null),(0,i._)([(0,m.MZ)(N.M6)],Se.prototype,"popupEnabled",void 0),(0,i._)([(0,m.MZ)({type:n.A,json:{name:"popupInfo",write:!0}})],Se.prototype,"popupTemplate",void 0),(0,i._)([(0,m.MZ)({readOnly:!0,json:{read:!1}})],Se.prototype,"defaultPopupTemplate",null),(0,i._)([(0,m.MZ)({type:String,json:{read:!1}})],Se.prototype,"objectIdField",void 0),(0,i._)([(0,g.w)("service","objectIdField",["objectIdField","fields"])],Se.prototype,"readObjectIdField",null),(0,i._)([(0,m.MZ)({type:String,json:{read:!1}})],Se.prototype,"globalIdField",void 0),(0,i._)([(0,g.w)("service","globalIdField",["globalIdField","fields"])],Se.prototype,"readGlobalIdField",null),(0,i._)([(0,m.MZ)({readOnly:!0,type:String,json:{read:!1}})],Se.prototype,"displayField",null),(0,i._)([(0,m.MZ)({type:String,json:{read:!1}})],Se.prototype,"profile",void 0),(0,i._)([(0,g.w)("service","profile",["store.profile"])],Se.prototype,"readProfile",null),(0,i._)([(0,m.MZ)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],Se.prototype,"normalReferenceFrame",void 0),(0,i._)([(0,m.MZ)(N.PY)],Se.prototype,"screenSizePerspectiveEnabled",void 0),(0,i._)([(0,m.MZ)({json:{read:!1,origins:{service:{read:!0}}}})],Se.prototype,"serviceItemId",void 0),Se=(0,i._)([(0,w.$)("esri.layers.SceneLayer")],Se);const _e={"mesh-pyramids":"mesh-pyramids",meshpyramids:"mesh-pyramids","features-meshes":"mesh-pyramids",points:"points","features-points":"points",lines:"lines","features-lines":"lines",polygons:"polygons","features-polygons":"polygons"},Ae={"mesh-pyramids":"mesh",points:"point",lines:"polyline",polygons:"polygon"},Le=Se},45652:(e,t,r)=>{r.d(t,{$1:()=>d,H2:()=>y,MT:()=>h,VP:()=>v,WF:()=>u,Wt:()=>s,XQ:()=>m,hK:()=>p,nS:()=>c,uh:()=>a,xY:()=>l});var i=r(50076);const o="upload-assets",n=()=>new Error;class s extends i.A{constructor(){super("".concat(o,":unsupported"),"Layer does not support asset uploads.",n())}}class a extends i.A{constructor(){super("".concat(o,":no-glb-support"),"Layer does not support glb.",n())}}class l extends i.A{constructor(){super("".concat(o,":no-supported-source"),"No supported external source found",n())}}class d extends i.A{constructor(){super("".concat(o,":not-base-64"),"Expected gltf data in base64 format after conversion.",n())}}class u extends i.A{constructor(){super("".concat(o,":unable-to-prepare-options"),"Unable to prepare uploadAsset request options.",n())}}class c extends i.A{constructor(e,t){super("".concat(o,":bad-response"),"Bad response. Uploaded ".concat(e," items and received ").concat(t," results."),n())}}class p extends i.A{constructor(e,t){var r,i;super("".concat(o,"-layer:upload-failed"),"Failed to upload mesh file ".concat(e,". Error code: ").concat(null!==(r=null===t||void 0===t?void 0:t.code)&&void 0!==r?r:"-1",". Error message: ").concat(null!==(i=null===t||void 0===t?void 0:t.messages)&&void 0!==i?i:"unknown"),n())}}class y extends i.A{constructor(e){super("".concat(o,"-layer:unsupported-format"),"The service allowed us to upload an asset of FormatID ".concat(e,", but it does not list it in its supported formats."),n())}}class h extends i.A{constructor(){super("".concat(o,":convert3D-failed"),"convert3D failed.")}}class v extends i.A{constructor(){super("invalid-input:no-model","No supported model found")}}class m extends i.A{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}},31362:(e,t,r)=>{r.d(t,{d:()=>s});var i=r(35143),o=r(46053),n=(r(81806),r(76460),r(47249),r(85842));const s=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,i._)([(0,o.MZ)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,i._)([(0,n.$)("esri.layers.mixins.CustomParametersMixin")],t),t}},61979:(e,t,r)=>{r.d(t,{Mk:()=>y,Zk:()=>u,w6:()=>m});var i=r(35143),o=r(54099),n=r(53084),s=r(50346),a=(r(76460),r(81806),r(50076),r(85842)),l=r(35298);const d=new o.A.EventEmitter;function u(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=(0,s.Tw)();return i=null==t||i,d.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:o.promise}),o}const c="esri.layers.mixins.EditBusLayer",p=Symbol(c);function y(e){return null!=e&&"object"==typeof e&&p in e}function h(e){return null!=e&&"object"==typeof e&&"gdbVersion"in e}function v(e,t,r){const i=new URL(e).host,o=l.Z3.get(i),n=e=>!e||e===o;return n(t)&&n(r)||t===r}const m=e=>{var t;let r=class extends e{constructor(){super(...arguments),this[t]=!0,this._applyEditsHandler=e=>{const{serviceUrl:t,layerId:r,gdbVersion:i,mayReceiveServiceEdits:o,result:s}=e,a=t===this.url,d=null!=r&&null!=this.layerId&&r===this.layerId,u=h(this),c=h(this)&&v(t,i,this.gdbVersion);if(!a||u&&!c||!d&&!o)return;const p=s.then((e=>{var t;if(d&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit("edits",(0,n.o8)(e)),e;const r=null===(t=e.editedFeatures)||void 0===t?void 0:t.find((e=>{let{layerId:t}=e;return t===this.layerId}));if(r){const{adds:t,updates:i,deletes:o}=r.editedFeatures,s={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:t?t.map((e=>{let{attributes:t}=e;return{objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}})):[],deletedFeatures:o?o.map((e=>{let{attributes:t}=e;return{objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}})):[],updatedFeatures:i?i.map((e=>{let{current:{attributes:t}}=e;return{objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}})):[],editedFeatures:(0,n.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,n.o8)(e.historicMoment)};return this.emit("edits",s),s}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,n.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,n.o8)(e.historicMoment)}})).then((e=>("historicMoment"in this&&this.historicMoment!==e.historicMoment&&(0,l.w5)(t,i)&&(this.historicMoment=e.historicMoment),e)));this.emit("apply-edits",{result:p})},this._updateMomentHandler=e=>{const{serviceUrl:t,gdbVersion:r,moment:i}=e,o=t===this.url,n=h(this),s=h(this)&&v(t,r,this.gdbVersion),a=h(this)&&!v(t,this.gdbVersion,null);o&&n&&s&&a&&"historicMoment"in this&&this.historicMoment!==i&&(this.historicMoment=i)},this.when().then((()=>{this.addHandles(function(e){return d.on("apply-edits",new WeakRef(e))}(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(function(e){return d.on("update-moment",new WeakRef(e))}(this._updateMomentHandler))}),(()=>{}))}};return t=p,r=(0,i._)([(0,a.$)(c)],r),r}},94729:(e,t,r)=>{r.d(t,{A:()=>S});var i=r(35143),o=r(86560),n=r(55171),s=r(3825),a=r(98773),l=r(50076),d=r(76460),u=r(30726),c=r(50346),p=r(90534),y=r(46053),h=(r(81806),r(47249),r(28379)),v=r(85842),m=r(17707),f=r(31933),g=r(65308),w=r(70652),b=r(38665),I=r(72945);const S=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,u.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new w.default({id:t.itemId,portal:null===r||void 0===r?void 0:r.portal})}writePortalItem(e,t){(null===e||void 0===e?void 0:e.id)&&(t.itemId=e.id)}async loadFromPortal(e,t){var i;if(null!==(i=this.portalItem)&&void 0!==i&&i.id)try{const{load:i}=await Promise.all([r.e(2487),r.e(3814)]).then(r.bind(r,73814));return(0,c.Te)(t),await i({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(o){throw(0,c.zf)(o)||d.A.getLogger(this).warn("Failed to load layer (".concat(this.title,", ").concat(this.id,") portal item (").concat(this.portalItem.id,")\n  ").concat(o)),o}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,c.QP)(e),!0))))}async setUserPrivileges(e,t){if(!o.A.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:i},content:{updateItem:o}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",i),this._set("userHasUpdateItemPrivileges",o)}catch(r){(0,c.QP)(r)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const i=e===r.id;if(i&&r.portal.user)return(0,I.It)(r);let o,s;if(i)o=r.portal.url;else try{o=await(0,f.wI)(this.url,t)}catch(u){(0,c.QP)(u)}if(!o||!(0,p.b8)(o,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;s=await(null===n.id||void 0===n.id?void 0:n.id.getCredential("".concat(o,"/sharing"),{prompt:!1,signal:e}))}catch(u){(0,c.QP)(u)}const a=!0,l=!1,d=!1;if(!s)return{features:{edit:a,fullEdit:l},content:{updateItem:d}};try{if(i?await r.reload():(r=new w.default({id:e,portal:{url:o}}),await r.load(t)),r.portal.user)return(0,I.It)(r)}catch(u){(0,c.QP)(u)}return{features:{edit:a,fullEdit:l},content:{updateItem:d}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(r){(0,c.QP)(r)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?null===n.id||void 0===n.id?void 0:n.id.findCredential(this.url):null;if(!t)return!0;const r=_.credential===t?_.user:await this._fetchEditingUser(e);return _.credential=t,_.user=r,null==(null===r||void 0===r?void 0:r.privileges)||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){var t,r;const i=null===(t=this.portalItem)||void 0===t||null===(t=t.portal)||void 0===t?void 0:t.user;if(i)return i;const o=n.id.findServerInfo(null!==(r=this.url)&&void 0!==r?r:"");if(null===o||void 0===o||!o.owningSystemUrl)return null;const l="".concat(o.owningSystemUrl,"/sharing/rest"),d=g.A.getDefault();if(d&&d.loaded&&(0,p.S8)(d.restUrl)===(0,p.S8)(l))return d.user;const u="".concat(l,"/community/self"),c=null!=e?e.signal:null,y=await(0,a.Ke)((0,s.A)(u,{authMode:"no-prompt",query:{f:"json"},signal:c}));return y.ok?b.A.fromJSON(y.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){var r;const i=null===t||void 0===t?void 0:t.portal,o=(null===(r=this.portalItem)||void 0===r?void 0:r.id)&&(this.portalItem.portal||g.A.getDefault());return i&&o&&!(0,p.ut)(o.restUrl,i.restUrl)?(t.messages&&t.messages.push(new l.A("layer:cross-portal","The layer '".concat(this.title," (").concat(this.id,")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer"),{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,i._)([(0,y.MZ)({type:w.default})],t.prototype,"portalItem",null),(0,i._)([(0,h.w)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,i._)([(0,m.K)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,i._)([(0,y.MZ)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,i._)([(0,v.$)("esri.layers.mixins.PortalLayer")],t),t},_={credential:null,user:null}},5682:(e,t,r)=>{r.d(t,{j:()=>s});var i=r(35143),o=r(46053),n=(r(81806),r(76460),r(47249),r(85842));const s=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const r=this._get("effectiveScaleRange");return r&&r.minScale===e.minScale&&r.maxScale===e.maxScale?r:e}};return(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,i._)([(0,o.MZ)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,i._)([(0,n.$)("esri.layers.mixins.ScaleRangeLayer")],t),t}},71401:(e,t,r)=>{r.d(t,{A:()=>x});var i,o=r(35143),n=r(95444),s=r(45802),a=r(42553),l=r(53084),d=r(76931),u=r(46053),c=(r(81806),r(76460),r(28379)),p=r(85842),y=r(17707),h=(r(47249),r(65460));let v=i=class extends a.oY{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?(0,h.mX)(t.value):e}writeExpression(e,t,r){null!=this.value&&(e=(0,h.mX)(this.value)),null!=e&&(t[r]=e)}clone(){return new i({expression:this.expression,title:this.title,value:this.value})}};(0,o._)([(0,u.MZ)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],v.prototype,"expression",void 0),(0,o._)([(0,c.w)("expression",["expression","value"])],v.prototype,"readExpression",null),(0,o._)([(0,y.K)("expression")],v.prototype,"writeExpression",null),(0,o._)([(0,u.MZ)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],v.prototype,"title",void 0),(0,o._)([(0,u.MZ)({json:{read:!1,write:!1}})],v.prototype,"value",void 0),v=i=(0,o._)([(0,p.$)("esri.layers.support.LabelExpressionInfo")],v);const m=v;var f,g=r(31933),w=r(84202),b=r(9192);const I=new s.J({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function S(e,t,r){return{enabled:!(0,g.TU)(null===r||void 0===r?void 0:r.layer)}}function _(e){var t;return!e||"service"!==e.origin&&!("map-image"===(null===(t=e.layer)||void 0===t?void 0:t.type))}function A(e){var t;return!!function(e){return"map-image"===(null===e||void 0===e?void 0:e.type)}(e)&&!(null===(t=e.capabilities)||void 0===t||null===(t=t.exportMap)||void 0===t||!t.supportsArcadeExpressionForLabeling)}let L=f=class extends a.oY{static evaluateWhere(e,t){const r=(e,t,r)=>{switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;const i=e.split(" ");if(3===i.length)return r(t[i[0]],i[1],i[2]);if(7===i.length){const e=r(t[i[0]],i[1],i[2]),o=i[3],n=r(t[i[4]],i[5],i[6]);switch(o){case"AND":return e&&n;case"OR":return e||n}}return!1}catch(i){console.log("Error.: can't parse = "+e)}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=w.Hk,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=(0,h.D3)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const t=(0,h.tH)(this.labelExpressionInfo.expression);t&&(e="["+t+"]")}null!=e&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(null==e&&null!=this.labelExpression&&_(i))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;const o=e.toJSON(i);o.expression&&(t[r]=o)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return(0,h.XJ)(this)}getLabelExpressionArcade(){return(0,h.BI)(this)}getLabelExpressionSingleField(){return(0,h.rU)(this)}hash(){return JSON.stringify(this)}clone(){return new f({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,l.o8)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,l.o8)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],L.prototype,"name",void 0),(0,o._)([(0,u.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:S}}}}})],L.prototype,"allowOverrun",void 0),(0,o._)([(0,u.MZ)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:S}}}}})],L.prototype,"deconflictionStrategy",void 0),(0,o._)([(0,u.MZ)({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&"service"===(null===r||void 0===r?void 0:r.origin)&&A(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],L.prototype,"labelExpression",void 0),(0,o._)([(0,c.w)("labelExpression")],L.prototype,"readLabelExpression",null),(0,o._)([(0,y.K)("labelExpression")],L.prototype,"writeLabelExpression",null),(0,o._)([(0,u.MZ)({type:m,json:{write:{overridePolicy:(e,t,r)=>function(e){return _(e)||A(null===e||void 0===e?void 0:e.layer)}(r)?{allowNull:!0}:{enabled:!1}}}})],L.prototype,"labelExpressionInfo",void 0),(0,o._)([(0,y.K)("labelExpressionInfo")],L.prototype,"writeLabelExpressionInfo",null),(0,o._)([(0,u.MZ)({type:I.apiValues,json:{type:I.jsonValues,read:I.read,write:I.write}})],L.prototype,"labelPlacement",void 0),(0,o._)([(0,u.MZ)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],L.prototype,"labelPosition",void 0),(0,o._)([(0,u.MZ)({type:Number})],L.prototype,"maxScale",void 0),(0,o._)([(0,y.K)("maxScale")],L.prototype,"writeMaxScale",null),(0,o._)([(0,u.MZ)({type:Number})],L.prototype,"minScale",void 0),(0,o._)([(0,y.K)("minScale")],L.prototype,"writeMinScale",null),(0,o._)([(0,u.MZ)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:S}}}}})],L.prototype,"repeatLabel",void 0),(0,o._)([(0,u.MZ)({type:Number,cast:d.cr,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:S}}}}})],L.prototype,"repeatLabelDistance",void 0),(0,o._)([(0,u.MZ)({types:n.em,json:{origins:{"web-scene":{types:n.Rv,write:b.oO,default:null}},write:b.oO,default:null}})],L.prototype,"symbol",void 0),(0,o._)([(0,u.MZ)({type:Boolean,json:{write:!0}})],L.prototype,"useCodedValues",void 0),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],L.prototype,"where",void 0),L=f=(0,o._)([(0,p.$)("esri.layers.support.LabelClass")],L);const x=L},83982:(e,t,r)=>{r.d(t,{A:()=>v});var i=r(35143),o=r(82111),n=r(53666),s=r(69098),a=r(42553),l=r(46053),d=(r(81806),r(76460),r(47249),r(28379)),u=r(85842),c=r(17707),p=r(67478);function y(e,t){return n.A.fromJSON({value:e,unit:t})}let h=class extends((0,s.O)(a.oY)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new o.A({start:r,end:i})}writeFullTimeExtent(e,t){null!=(null===e||void 0===e?void 0:e.start)&&null!=e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?y(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?y(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){var r,i;t.timeInterval=null!==(r=null===e||void 0===e?void 0:e.toJSON().value)&&void 0!==r?r:null,t.timeIntervalUnits=null!==(i=null===e||void 0===e?void 0:e.toJSON().unit)&&void 0!==i?i:null}};(0,i._)([(0,l.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],h.prototype,"cumulative",void 0),(0,i._)([(0,l.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],h.prototype,"endField",void 0),(0,i._)([(0,l.MZ)({type:o.A,json:{write:{enabled:!0,allowNull:!0}}})],h.prototype,"fullTimeExtent",void 0),(0,i._)([(0,d.w)("fullTimeExtent",["timeExtent"])],h.prototype,"readFullTimeExtent",null),(0,i._)([(0,c.K)("fullTimeExtent")],h.prototype,"writeFullTimeExtent",null),(0,i._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],h.prototype,"hasLiveData",void 0),(0,i._)([(0,l.MZ)({type:n.A,json:{write:{enabled:!0,allowNull:!0}}})],h.prototype,"interval",void 0),(0,i._)([(0,d.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],h.prototype,"readInterval",null),(0,i._)([(0,c.K)("interval")],h.prototype,"writeInterval",null),(0,i._)([(0,l.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],h.prototype,"startField",void 0),(0,i._)([(0,l.MZ)((0,p.P6)("timeReference",!0))],h.prototype,"timeZone",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],h.prototype,"trackIdField",void 0),(0,i._)([(0,l.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],h.prototype,"useTime",void 0),h=(0,i._)([(0,u.$)("esri.layers.support.TimeInfo")],h);const v=h},19463:(e,t,r)=>{r.d(t,{E1:()=>a,Fm:()=>l,JZ:()=>v,R_:()=>s,fu:()=>o,oF:()=>n,rq:()=>d});const i=[["binary","application/octet-stream","bin",""]];function o(e,t){var r;return null!=c(t.name,null!==(r=null===e||void 0===e?void 0:e.supportedFormats)&&void 0!==r?r:[])}function n(e,t){var r;if(!e)return!1;const i=d(t,null!==(r=e.supportedFormats)&&void 0!==r?r:[]);return null!=i&&e.editFormats.includes(i)}function s(e,t){return p(function(e,t){const r=e.toLowerCase();return u(t).find((e=>y(e)===r))}(e,t))}function a(e,t){return p(c(e,t))}function l(e,t){return y(function(e,t){return u(t).find((t=>p(t)===e))}(e,t))}function d(e,t){var r;return null!==(r=a(e.name,t))&&void 0!==r?r:s(e.type,t)}function u(e){return[...i,...e]}function c(e,t){const r=e.toLowerCase();return u(t).find((e=>h(e).some((e=>r.endsWith(e)))))}function p(e){return null===e||void 0===e?void 0:e[0]}function y(e){return null===e||void 0===e?void 0:e[1].toLowerCase()}function h(e){var t;return null!==(t=null===e||void 0===e?void 0:e[2].split(",").map((e=>e.toLowerCase())))&&void 0!==t?t:[]}function v(e){var t;return null===(t=e.tables)||void 0===t?void 0:t.find((e=>"assetMaps"===e.role))}},27937:(e,t,r)=>{r.d(t,{w:()=>d,z:()=>c});var i=r(50076),o=r(53084),n=r(76460),s=r(71401);const a=()=>n.A.getLogger("esri.layers.support.labelingInfo"),l=/\[([^\[\]]+)\]/gi;function d(e,t,r){return e?e.map((e=>{const i=new s.A;if(i.read(e,r),i.labelExpression){var o;const e=t.fields||(null===(o=t.layerDefinition)||void 0===o?void 0:o.fields)||this.fields;i.labelExpression=i.labelExpression.replaceAll(l,((t,r)=>"[".concat(function(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const e=t[i].name;if(e.toLowerCase()===r)return e}return e}(r,e),"]")))}return i})):null}const u={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function c(e,t){const r=(0,o.o8)(e);return r.some((e=>function(e,t){const r=e.labelPlacement,o=u[t];if(!e.symbol)return a().warn("No ILabelClass symbol specified."),!0;if(!o)return a().error(new i.A("labeling:unsupported-geometry-type","Unable to create labels for layer, geometry type '".concat(t,"' is not supported"))),!0;if(!o.includes(r)){const i=o[0];r&&a().warn("Found invalid label placement type ".concat(r," for ").concat(t,". Defaulting to ").concat(i)),e.labelPlacement=i}return!1}(e,t)))?[]:r}},72945:(e,t,r)=>{r.d(t,{It:()=>p,LG:()=>s,OM:()=>d,Y:()=>a,bK:()=>l,mm:()=>c,sQ:()=>u});var i=r(26346),o=r(13312),n=r(45417);function s(e,t){if(!a(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function a(e,t){var r;return!(null===(r=e.typeKeywords)||void 0===r||!r.includes(t))}function l(e){return a(e,c.HOSTED_SERVICE)}function d(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}async function u(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return async function(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,n.ci)(e);const r=o.A.WGS84;return await(0,i.initializeProjection)(t,r),(0,i.project)(e,r)}(r)}const c={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function p(e){var t;const{portal:r,isOrgItem:i,itemControl:o}=e,n=null===(t=r.user)||void 0===t?void 0:t.privileges;let s=!n||n.includes("features:user:edit"),a=!!i&&!(null===n||void 0===n||!n.includes("features:user:fullEdit"));const l="update"===o||"admin"===o;return l?a=s=!0:a&&(s=!0),{features:{edit:s,fullEdit:a},content:{updateItem:l}}}},95474:(e,t,r)=>{r.d(t,{n:()=>o});var i=r(90534);function o(e){return n[function(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function(e){const t=(0,i.Zo)(e);return l[t]||s}(e.url)}(e)]||a}const n={},s="text/plain",a=n[s],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const d in l)n[l[d]]=d},90115:(e,t,r)=>{r.d(t,{j:()=>i});const i=(0,r(45802).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},81589:(e,t,r)=>{r.d(t,{L:()=>s});var i=r(98773),o=r(50346),n=r(62754);async function s(e,t,r){const s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(s&&"unique-value"===s.type&&s.styleOrigin){const a=await(0,i.Ke)(s.populateFromStyle());if((0,o.Te)(r),!1===a.ok){const r=a.error;null!==t&&void 0!==t&&t.messages&&t.messages.push(new n.A("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(r.message),{error:r,context:t})),e.clear("renderer",null===t||void 0===t?void 0:t.origin)}}}},9708:(e,t,r)=>{r.d(t,{A:()=>p});var i,o=r(35143),n=r(42553),s=r(53084),a=r(46053),l=r(40565),d=r(85842),u=r(17707);let c=i=class extends n.oY{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new i((0,s.o8)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,o._)([(0,a.MZ)({type:[String],json:{write:!0}})],c.prototype,"attachmentTypes",void 0),(0,o._)([(0,a.MZ)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],c.prototype,"attachmentsWhere",void 0),(0,o._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"cacheHint",void 0),(0,o._)([(0,a.MZ)({type:[String],json:{write:!0}})],c.prototype,"keywords",void 0),(0,o._)([(0,a.MZ)({type:[Number],json:{write:!0}})],c.prototype,"globalIds",void 0),(0,o._)([(0,a.MZ)({json:{write:!0}})],c.prototype,"name",void 0),(0,o._)([(0,a.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],c.prototype,"num",void 0),(0,o._)([(0,a.MZ)({type:[Number],json:{write:!0}})],c.prototype,"objectIds",void 0),(0,o._)([(0,a.MZ)({type:Boolean,json:{default:!1,write:!0}})],c.prototype,"returnMetadata",void 0),(0,o._)([(0,a.MZ)({type:[Number],json:{write:!0}})],c.prototype,"size",void 0),(0,o._)([(0,a.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],c.prototype,"start",void 0),(0,o._)([(0,u.K)("start"),(0,u.K)("num")],c.prototype,"writeStart",null),(0,o._)([(0,a.MZ)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],c.prototype,"where",void 0),c=i=(0,o._)([(0,d.$)("esri.rest.support.AttachmentQuery")],c),c.from=(0,l.dp)(c);const p=c},30973:(e,t,r)=>{r.d(t,{tn:()=>d});var i=r(16868),o=r(53430),n=r(75900),s=(r(56362),r(87015),r(81940),r(6929)),a=(r(7198),r(93616),r(53539),r(40585)),l=r(17542);function d(e,t){let{displayField:r,editFieldsInfo:a,fields:l,objectIdField:d,title:u}=e;if(!l)return null;const c=p({editFieldsInfo:a,fields:l,objectIdField:d},t);if(!c.length)return null;const y=function(e){const t=(0,o.mB)(e),{titleBase:r}=e;return t?"".concat(r,": {").concat(t.trim(),"}"):null!==r&&void 0!==r?r:""}({titleBase:u,fields:l,displayField:r}),h=[new s.A,new n.A];return new i.A({title:y,content:h,fieldInfos:c})}const u=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,o.Bz)(e,t);function c(e,t){return"oid"===e.type?-1:"oid"===t.type?1:h(e)?-1:h(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function p(e,t){var r;const i=null===t||void 0===t?void 0:t.visibleFieldNames;return function(e,t){const r=e;return t&&(e=e.filter((e=>!t.includes(e.type)))),e===r&&(e=e.slice()),e.sort(c),e}(null!==(r=e.fields)&&void 0!==r?r:[],(null===t||void 0===t?void 0:t.ignoreFieldTypes)||v).map((t=>new a.A({fieldName:t.name,isEditable:(0,o.R$)(t,e),label:t.alias,format:y(t),visible:u(t,{...e,visibleFieldNames:i})})))}function y(e){switch(e.type){case"small-integer":case"integer":case"single":return new l.A({digitSeparator:!0,places:0});case"double":return new l.A({digitSeparator:!0,places:2});case"string":return(0,o.JL)(e.name)?new l.A({digitSeparator:!0,places:0}):null;default:return null}}function h(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())}const v=["geometry","blob","raster","guid","xml"]},35298:(e,t,r)=>{r.d(t,{TA:()=>o,We:()=>a,Z3:()=>n,ZJ:()=>l,w5:()=>d});var i=r(3825);const o=(0,r(49723).vD)(),n=new Map,s=new Map;new Map;async function a(e,t,r){if(!e||!r)return!1;if(!t)return!0;const o=new URL(e).host;let s=n.get(o);if(!s){const t=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await(0,i.A)(t,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===t}async function l(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!t)return!0;const a=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),l=null===(i=s.get(a))||void 0===i?void 0:i.entries();if(l)for(const[s,u]of l)if(u.name===t){var d;const e=!(null!==(d=u.stack)&&void 0!==d&&d.hasForwardEdits());if(!e&&n){const[{deleteForwardEdits:e},{default:t}]=await Promise.all([r.e(6868).then(r.bind(r,56868)),r.e(7028).then(r.bind(r,37028))]);return e(a,s,new t({sessionId:o,moment:u.moment}))}return e}return!0}function d(e,t){var r;if(!e)return!1;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),o=null===(r=s.get(i))||void 0===r?void 0:r.entries();if(o)for(const[n,s]of o)if(s.name===t)return"edit"===s.lockType;return!1}}}]);
//# sourceMappingURL=9035.d9b49fca.chunk.js.map