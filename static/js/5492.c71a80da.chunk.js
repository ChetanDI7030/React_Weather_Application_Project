"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[5492],{4815:(e,a,n)=>{var i,r;function t(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function l(e){return null!=e&&!isNaN(e)&&isFinite(e)}function s(e){return e.valueExpression?i.Expression:e.field&&"string"==typeof e.field?i.Field:i.Unknown}function o(e,a){const n=a||s(e),t=e.valueUnit||"unknown";return n===i.Unknown?r.Constant:e.stops?r.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?r.ClampedLinear:"unknown"===t?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?r.Proportional:r.Additive:r.Identity:r.RealWorldSize}n.d(a,{KZ:()=>o,Yf:()=>i,_w:()=>r,eh:()=>s,gf:()=>l,of:()=>t}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(i||(i={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(r||(r={}))},15492:(e,a,n)=>{n.r(a),n.d(a,{getAllSizes:()=>z,getColor:()=>p,getOpacity:()=>v,getRotationAngle:()=>b,getSize:()=>h,getSizeForValue:()=>w,getSizeFromNumberOrVariable:()=>m,getSizeRangeAtScale:()=>x,getVisualVariableValues:()=>g,viewScaleRE:()=>f});var i=n(69539),r=n(39356),t=n(4212),l=n(76460),s=n(3454),o=n(4815);const u=()=>l.A.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),c=new r.A,d=Math.PI,f=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function p(e,a,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"color"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.ColorVariable"!==r.declaredClass)return void u().warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const t="number"==typeof a,l=t?null:a,s=null===l||void 0===l?void 0:l.attributes;let o=t?a:null;const c=r.field,{ipData:d,hasExpression:f}=r.cache;let p=r.cache.compiledFunc;if(!c&&!f){const e=r.stops;return e&&e[0]&&e[0].color}if("number"!=typeof o)if(f){if(null==(null===n||void 0===n?void 0:n.arcade))return void u().error("Use of arcade expressions requires an arcade context");const e={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},a=n.arcade.arcadeUtils,i=a.getViewInfo(e),t=a.createExecContext(l,i,n.timeZone);if(!p){const e=a.createSyntaxTree(r.valueExpression);p=a.createFunction(e),r.cache.compiledFunc=p}o=a.executeFunction(p,t)}else s&&(o=s[c]);const v=r.normalizationField,b=null!=s&&null!=v?parseFloat(s[v]):void 0;if(null!=o&&(!v||t||!isNaN(b)&&0!==b)){isNaN(b)||t||(o/=b);const e=S(o,d);if(e){const a=e[0],t=e[1],l=a===t?r.stops[a].color:i.A.blendColors(r.stops[a].color,r.stops[t].color,e[2],null!=n?n.color:void 0);return new i.A(l)}}}function v(e,a,n){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"opacity"===e.type)):e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void u().warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const r="number"==typeof a,t=r?null:a,l=null===t||void 0===t?void 0:t.attributes;let s=r?a:null;const o=i.field,{ipData:c,hasExpression:d}=i.cache;let f=i.cache.compiledFunc;if(!o&&!d){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof s)if(d){if(null==(null===n||void 0===n?void 0:n.arcade))return void u().error("Use of arcade expressions requires an arcade context");const e={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},a=n.arcade.arcadeUtils,r=a.getViewInfo(e),l=a.createExecContext(t,r,n.timeZone);if(!f){const e=a.createSyntaxTree(i.valueExpression);f=a.createFunction(e),i.cache.compiledFunc=f}s=a.executeFunction(f,l)}else l&&(s=l[o]);const p=i.normalizationField,v=null!=l&&null!=p?parseFloat(l[p]):void 0;if(null!=s&&(!p||r||!isNaN(v)&&0!==v)){isNaN(v)||r||(s/=v);const e=S(s,c);if(e){const a=e[0],n=e[1];if(a===n)return i.stops[a].opacity;{const r=i.stops[a].opacity;return r+(i.stops[n].opacity-r)*e[2]}}}}function b(e,a,n){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"rotation"===e.type)):e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void u().warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const r=i.axis||"heading",t="heading"===r&&"arithmetic"===i.rotationType?90:0,l="heading"===r&&"arithmetic"===i.rotationType?-1:1,s="number"==typeof a?null:a,o=null===s||void 0===s?void 0:s.attributes,c=i.field,{hasExpression:d}=i.cache;let f=i.cache.compiledFunc,p=0;if(!c&&!d)return p;if(d){if(null==(null===n||void 0===n?void 0:n.arcade))return void u().error("Use of arcade expressions requires an arcade context");const e={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},a=n.arcade.arcadeUtils,r=a.getViewInfo(e),t=a.createExecContext(s,r,n.timeZone);if(!f){const e=a.createSyntaxTree(i.valueExpression);f=a.createFunction(e),i.cache.compiledFunc=f}p=a.executeFunction(f,t)}else o&&(p=o[c]||0);return p="number"!=typeof p||isNaN(p)?null:t+l*p,p}function h(e,a,n){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"size"===e.type)):e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void u().warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const r=w(function(e,a,n){const i="number"==typeof a,r=i?null:a,t=null===r||void 0===r?void 0:r.attributes;let l=i?a:null;const{isScaleDriven:s}=e.cache;let c=e.cache.compiledFunc;if(s){const a=null!=n?n.scale:void 0,i=null!=n?n.view:void 0;l=null==a||"3d"===i?function(e){let a=null,n=null;const i=e.stops;return i?(a=i[0].value,n=i[i.length-1].value):(a=e.minDataValue||0,n=e.maxDataValue||0),(a+n)/2}(e):a}else if(!i)switch(e.inputValueType){case o.Yf.Expression:{if(null==(null===n||void 0===n?void 0:n.arcade))return void u().error("Use of arcade expressions requires an arcade context");const a={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},i=n.arcade.arcadeUtils,t=i.getViewInfo(a),s=i.createExecContext(r,t,n.timeZone);if(!c){const a=i.createSyntaxTree(e.valueExpression);c=i.createFunction(a),e.cache.compiledFunc=c}l=i.executeFunction(c,s);break}case o.Yf.Field:t&&(l=t[e.field]);break;case o.Yf.Unknown:l=null}if(!(0,o.gf)(l))return null;if(i||!e.normalizationField)return l;const d=t?parseFloat(t[e.normalizationField]):null;return(0,o.gf)(d)&&0!==d?l/d:null}(i,a,n),i,a,n,i.cache.ipData);return null==r||isNaN(r)?0:r}function m(e,a,n){return null==e?null:(0,o.of)(e)?h(e,a,n):(0,o.gf)(e)?e:null}function V(e,a,n){return(0,o.gf)(n)&&e>n?n:(0,o.gf)(a)&&e<a?a:e}function w(e,a,n,i,r){switch(a.transformationType){case o._w.Additive:return function(e,a,n,i){var r;return e+(null!==(r=m(a.minSize,n,i)||a.minDataValue)&&void 0!==r?r:0)}(e,a,n,i);case o._w.Constant:return function(e,a,n){const i=e.stops;let r=(null===i||void 0===i?void 0:i.length)&&i[0].size;return null==r&&(r=e.minSize),m(r,a,n)}(a,n,i);case o._w.ClampedLinear:return function(e,a,n,i){const r=(e-a.minDataValue)/(a.maxDataValue-a.minDataValue),t=m(a.minSize,n,i),l=m(a.maxSize,n,i),s=null!=i?i.shape:void 0;if(e<=a.minDataValue)return t;if(e>=a.maxDataValue)return l;if(null==t||null==l)return null;if("area"===a.scaleBy&&s){const e="circle"===s,a=e?d*(t/2)**2:t*t,n=a+r*((e?d*(l/2)**2:l*l)-a);return e?2*Math.sqrt(n/d):Math.sqrt(n)}return t+r*(l-t)}(e,a,n,i);case o._w.Proportional:return function(e,a,n,i){const r=null!=i?i.shape:void 0,t=e/a.minDataValue,l=m(a.minSize,n,i),s=m(a.maxSize,n,i);let o=null;return o="circle"===r?2*Math.sqrt(t*(l/2)**2):"square"===r||"diamond"===r||"image"===r?Math.sqrt(t*l**2):t*l,V(o,l,s)}(e,a,n,i);case o._w.Stops:return function(e,a,n,i,r){var t;const[l,s,o]=S(e,r);if(l===s)return m(null===(t=a.stops)||void 0===t?void 0:t[l].size,n,i);{var u,c;const e=m(null===(u=a.stops)||void 0===u?void 0:u[l].size,n,i);return e+(m(null===(c=a.stops)||void 0===c?void 0:c[s].size,n,i)-e)*o}}(e,a,n,i,r);case o._w.RealWorldSize:return function(e,a,n,i){var r;const t=(null!==(r=null===i||void 0===i?void 0:i.resolution)&&void 0!==r?r:1)*s.j[a.valueUnit],l=m(a.minSize,n,i),o=m(a.maxSize,n,i),{valueRepresentation:u}=a;let c=null;return c="area"===u?2*Math.sqrt(e/d)/t:"radius"===u||"distance"===u?2*e/t:e/t,V(c,l,o)}(e,a,n,i);case o._w.Identity:return e;case o._w.Unknown:return null}}function x(e,a,n){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===n||a))return null;const r={scale:a,view:n};let t=m(e.minSize,c,r),l=m(e.maxSize,c,r);if(null!=t||null!=l){if(t>l){const e=l;l=t,t=e}return{minSize:t,maxSize:l}}}function g(e,a,n){if(!e.visualVariables)return;const i=[],r=[],t=[],l=[],s=[];for(const o of e.visualVariables)switch(o.type){case"color":r.push(o);break;case"opacity":t.push(o);break;case"rotation":s.push(o);break;case"size":l.push(o)}return r.forEach((e=>{const r=p(e,a,n);i.push({variable:e,value:r})})),t.forEach((e=>{const r=v(e,a,n);i.push({variable:e,value:r})})),s.forEach((e=>{const r=b(e,a,n);i.push({variable:e,value:r})})),l.forEach((e=>{const r=h(e,a,n);i.push({variable:e,value:r})})),i.filter((e=>null!=e.value))}function S(e,a){if(!a)return;let n=0,i=a.length-1;return a.some(((a,r)=>e<a?(i=r,!0):(n=r,!1))),[n,i,(e-a[n])/(a[i]-a[n])]}function z(e,a,n){const i=["proportional","proportional","proportional"];for(const r of e){const e=r.useSymbolValue?"symbol-value":h(r,a,n);switch(r.axis){case"width":i[0]=e;break;case"depth":i[1]=e;break;case"height":i[2]=e;break;case"width-and-depth":i[0]=e,i[1]=e;break;case"all":case void 0:case null:i[0]=e,i[1]=e,i[2]=e;break;default:(0,t.Xb)(r.axis)}}return i}}}]);
//# sourceMappingURL=5492.c71a80da.chunk.js.map